<section class="section-bg-v2" id="bewertungen">
  <h2 alt="Immobilienverkauf, top bewertet - Hilgert Immobilien">
    Wir verkaufen Immobilien mit bester Kundenzufriedenheit
  </h2>
  <div class="rating-iframe-container">
    <iframe height="160" width="190"
      src=""
      frameborder="0"
      style="overflow:hidden;"
      marginheight="0"
      marginwidth="0"
      scroll="no">
    </iframe>
  </div>
  <h2 class="width-100" alt="professionell, erfahren, vertrauensvoll, persönlich - Hilgert Immobilien">
    Das sagen unsere Kunden
  </h2>
  <p class="values-statement">Wir arbeiten professionell, engagiert und transparent</p>
  
  <!-- Only show slider if we have reviews -->
  <div *ngIf="reviewPairs && reviewPairs.length > 0" class="slider-container">
    <div class="arrow-box" (click)="prevPage()">
      <svg width="100" height="100" viewBox="0 0 100 100">
        <path d="M40 20 L20 50 L40 80" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M70 20 L50 50 L70 80" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
    <div class="review-slider">
      <div class="review-wrapper">
        <div class="review-grid" [style.transform]="'translateX(' + slidePosition + '%)'">
          <div class="review-pair" *ngFor="let pair of reviewPairs">
            <ng-container *ngFor="let review of pair">
              <!-- Only render if we have a real review -->
              <div *ngIf="review && review.autorName" class="review-item">
                <div class="review-header">
                  <div class="review-stars">
                    <span class="star" *ngFor="let star of [1,2,3,4,5]" [ngClass]="{'filled': star <= review.rating}">★</span>
                  </div>
                  <div class="reviewer-info">
                    <span class="reviewer-name">{{ review.autorName }}</span>
                    <span class="review-date">{{ review.creationDate | date:'dd.MM.yyyy' }}</span>
                  </div>
                </div>
                <p class="review-text">{{ review.text }}</p>
              </div>
              <!-- Empty placeholder if no review (to maintain layout) -->
              <div *ngIf="!review || !review.autorName" class="review-item empty-review"></div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <div class="arrow-box" (click)="nextPage()">
      <svg width="100" height="100" viewBox="0 0 100 100">
        <path d="M60 20 L80 50 L60 80" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M30 20 L50 50 L30 80" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  </div>
  
  <!-- Show message if no reviews -->
  <div *ngIf="!reviewPairs || reviewPairs.length === 0" class="no-reviews-message">
    <p>Derzeit sind keine Bewertungen verfügbar.</p>
  </div>
</section>